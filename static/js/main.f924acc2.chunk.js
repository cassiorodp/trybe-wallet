(this.webpackJsonptrybewallet=this.webpackJsonptrybewallet||[]).push([[0],{21:function(e,t,a){e.exports=a.p+"static/media/bitcoin.1a3bd732.gif"},34:function(e,t,a){e.exports=a(52)},43:function(e,t,a){},45:function(e,t,a){},46:function(e,t,a){},47:function(e,t,a){},48:function(e,t,a){},49:function(e,t,a){},50:function(e,t,a){},52:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(19),i=a.n(c),l=a(24),s=a(12),o=(a(43),a(4)),u=a(14),d=a(5),h=a(6),m=a(3),p=a(8),b=a(7),E=a(21),v=a.n(E),f=a(16),g=a.n(f),O=a(22),j=a(1),x=function(){return{type:"COINS_LOADING"}},C=function(e){return{type:"COINS_FAIL",error:e}},y=function(e,t){return{type:"SPENT_SUCCESS",spent:Object(j.a)(Object(j.a)({},e),{},{exchangeRates:t})}},k=function(){var e=Object(O.a)(g.a.mark((function e(){var t,a;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://economia.awesomeapi.com.br/json/all");case 2:return t=e.sent,e.next=5,t.json();case 5:return delete(a=e.sent).USDT,e.abrupt("return",a);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),I=function(e){return function(){var t=Object(O.a)(g.a.mark((function t(a){var n;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a(x),t.prev=1,t.next=4,k();case 4:n=t.sent,a(y(e,n)),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),a(C(t.t0));case 11:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e){return t.apply(this,arguments)}}()},S=function(e,t){return{type:"REPLACE_ITEM",itemId:e,updatedItem:t}},w=(a(45),function(e){Object(p.a)(a,e);var t=Object(b.a)(a);function a(e){var n;return Object(d.a)(this,a),(n=t.call(this,e)).state={email:"",password:"",buttonDisable:!0,checkEmail:!1,checkPassword:!1},n.handleChange=n.handleChange.bind(Object(m.a)(n)),n.renderInputs=n.renderInputs.bind(Object(m.a)(n)),n.validateLogin=n.validateLogin.bind(Object(m.a)(n)),n.validateEmail=n.validateEmail.bind(Object(m.a)(n)),n.validatePassword=n.validatePassword.bind(Object(m.a)(n)),n.changePage=n.changePage.bind(Object(m.a)(n)),n}return Object(h.a)(a,[{key:"validateEmail",value:function(e){var t=this;e.match(/^[^\s@]+@[^\s@]+\.[^\s@]+$/)?this.setState({checkEmail:!0},(function(){return t.validateLogin()})):this.setState({checkEmail:!1},(function(){return t.validateLogin()}))}},{key:"validatePassword",value:function(e){var t=this;e.length>=6?this.setState({checkPassword:!0},(function(){return t.validateLogin()})):this.setState({checkPassword:!1},(function(){return t.validateLogin()}))}},{key:"validateLogin",value:function(){var e=this.state,t=e.checkEmail,a=e.checkPassword;return t&&a?this.setState({buttonDisable:!1}):this.setState({buttonDisable:!0})}},{key:"handleChange",value:function(e){var t=e.target,a=t.id,n=t.value;this.setState(Object(u.a)({},a,n)),"email"===a&&this.validateEmail(n),"password"===a&&this.validatePassword(n)}},{key:"changePage",value:function(){var e=this.props,t=e.history;(0,e.storeEmail)(this.state.email),t.push("/carteira")}},{key:"renderInputs",value:function(){var e=this.state,t=e.email,a=e.password;return r.a.createElement(r.a.Fragment,null,r.a.createElement("label",{htmlFor:"email",className:"form-label"},"Email:",r.a.createElement("input",{className:"form-control","data-testid":"email-input",value:t,id:"email",type:"email",onChange:this.handleChange})),r.a.createElement("label",{htmlFor:"password",className:"form-label"},"Senha:",r.a.createElement("input",{className:"form-control","data-testid":"password-input",value:a,id:"password",type:"password",onChange:this.handleChange})))}},{key:"render",value:function(){var e=this.state.buttonDisable;return r.a.createElement("main",{className:"main-container"},r.a.createElement("h1",{className:"title"},"Virtual Wallet"),r.a.createElement("img",{src:v.a,alt:"bitcoin gif"}),r.a.createElement("form",{className:"form-container"},this.renderInputs(),r.a.createElement("button",{className:"btn btn-success",disabled:e,type:"button",onClick:this.changePage},"Entrar")))}}]),a}(r.a.Component)),N=Object(s.b)(null,(function(e){return{storeEmail:function(t){return e(function(e){return{type:"GET_USER_EMAIL",email:e}}(t))}}}))(w),T=(a(46),function(e){Object(p.a)(a,e);var t=Object(b.a)(a);function a(){return Object(d.a)(this,a),t.apply(this,arguments)}return Object(h.a)(a,[{key:"renderTableHead",value:function(){return r.a.createElement("thead",{className:"table-head"},r.a.createElement("tr",null,r.a.createElement("th",null,"Descri\xe7\xe3o"),r.a.createElement("th",null,"Tag"),r.a.createElement("th",null,"M\xe9todo de pagamento"),r.a.createElement("th",null,"Valor"),r.a.createElement("th",null,"Moeda"),r.a.createElement("th",null,"C\xe2mbio utilizado"),r.a.createElement("th",null,"Valor convertido"),r.a.createElement("th",null,"Moeda de convers\xe3o"),r.a.createElement("th",null,"Editar/Excluir")))}},{key:"render",value:function(){var e=this.props,t=e.expenses,a=e.editExpenses,n=e.deleteExpenses;return r.a.createElement("table",{className:"table-container"},this.renderTableHead(),r.a.createElement("tbody",null,t.map((function(e){return r.a.createElement("tr",{key:e.id,style:{textAlign:"center"}},r.a.createElement("td",null,e.description),r.a.createElement("td",null,e.tag),r.a.createElement("td",null,e.method),r.a.createElement("td",null,"".concat(e.currency," ").concat(parseInt(e.value,10).toFixed(2))),r.a.createElement("td",null,e.exchangeRates[e.currency].name.split("/")[0]),r.a.createElement("td",null,"R$ ".concat(parseFloat(e.exchangeRates[e.currency].ask).toFixed(2))),r.a.createElement("td",null,"R$ ".concat((e.exchangeRates[e.currency].ask*e.value).toFixed(2))),r.a.createElement("td",null,e.exchangeRates[e.currency].name.split("/")[1]),r.a.createElement("td",null,r.a.createElement("button",{onClick:function(){return a(e.id)},type:"button",className:"btn btn-warning edit-button"},r.a.createElement("i",{className:"fas fa-edit"})),r.a.createElement("button",{onClick:function(){return n(e.id)},"data-testid":"delete-btn",type:"button",className:"btn btn-danger delete-button"},r.a.createElement("i",{className:"fas fa-trash"}))))}))))}}]),a}(n.Component)),L=Object(s.b)((function(e){return{expenses:e.wallet.expenses}}),(function(e){return{editExpenses:function(t){return e(function(e){return{type:"EDIT_ITEM",selectedItem:e,editItem:!0}}(t))},deleteExpenses:function(t){return e({type:"DELETE_ITEM",itemId:t})}}}))(T),D=function(e){Object(p.a)(a,e);var t=Object(b.a)(a);function a(){return Object(d.a)(this,a),t.apply(this,arguments)}return Object(h.a)(a,[{key:"render",value:function(){var e=this.props,t=e.labelText,a=e.id,n=e.onChange,c=e.value;return r.a.createElement("label",{htmlFor:a,className:"form-label"},t,r.a.createElement("input",{className:"form-control",value:c,onChange:n,id:a,type:"text"}))}}]),a}(n.Component),_=function(e){Object(p.a)(a,e);var t=Object(b.a)(a);function a(){return Object(d.a)(this,a),t.apply(this,arguments)}return Object(h.a)(a,[{key:"render",value:function(){var e=this.props,t=e.labelText,a=e.id,n=e.ariaLabel,c=e.onChange,i=e.currencies,l=e.value;return r.a.createElement("label",{htmlFor:a,className:"form-label"},t,r.a.createElement("select",{className:"form-select",onChange:c,"aria-label":n,id:a,value:l},i.map((function(e){return r.a.createElement("option",{key:e,value:e},e)}))))}}]),a}(n.Component),A=(a(47),function(e){Object(p.a)(a,e);var t=Object(b.a)(a);function a(e){var n;return Object(d.a)(this,a),(n=t.call(this,e)).state={expenses:{value:"",description:"",currency:"USD",method:"Dinheiro",tag:"Alimenta\xe7\xe3o"},addButton:!0},n.handleChange=n.handleChange.bind(Object(m.a)(n)),n.handleExpenses=n.handleExpenses.bind(Object(m.a)(n)),n.checkInputs=n.checkInputs.bind(Object(m.a)(n)),n}return Object(h.a)(a,[{key:"handleExpenses",value:function(){(0,this.props.dispatchSpent)(this.state.expenses),this.setState({expenses:{value:"",description:"",currency:"USD",method:"Dinheiro",tag:"Alimenta\xe7\xe3o"}})}},{key:"handleChange",value:function(e){var t=e.target,a=this.state.expenses,n=t.id,r=t.value;this.setState({expenses:Object(j.a)(Object(j.a)({},a),{},Object(u.a)({},n,r))}),this.checkInputs()}},{key:"checkInputs",value:function(){var e=this.state.expenses,t=e.value,a=e.description;return t&&a?this.setState({addButton:!1}):this.setState({addButton:!0})}},{key:"render",value:function(){var e=this.props.currencies,t=this.state,a=t.expenses,n=t.addButton;return r.a.createElement("form",{className:"add-form-container"},r.a.createElement(D,{value:a.value,labelText:"Valor:",id:"value",onChange:this.handleChange}),r.a.createElement(D,{value:a.description,labelText:"Descri\xe7\xe3o:",id:"description",onChange:this.handleChange}),r.a.createElement(_,{labelText:"Moeda:",id:"currency",ariaLabel:"moeda",onChange:this.handleChange,currencies:e}),r.a.createElement("label",{htmlFor:"method",className:"form-label"},"M\xe9todo de pagamento:",r.a.createElement("select",{className:"form-select",onChange:this.handleChange,"aria-label":"m\xe9todo de pagamento",id:"method"},r.a.createElement("option",{value:"Dinheiro"},"Dinheiro"),r.a.createElement("option",{value:"Cart\xe3o de cr\xe9dito"},"Cart\xe3o de cr\xe9dito"),r.a.createElement("option",{value:"Cart\xe3o de d\xe9bito"},"Cart\xe3o de d\xe9bito"))),r.a.createElement("label",{htmlFor:"tag",className:"form-label"},"Tag:",r.a.createElement("select",{className:"form-select",onChange:this.handleChange,name:"tag",id:"tag"},r.a.createElement("option",{value:"Alimenta\xe7\xe3o"},"Alimenta\xe7\xe3o"),r.a.createElement("option",{value:"Lazer"},"Lazer"),r.a.createElement("option",{value:"Trabalho"},"Trabalho"),r.a.createElement("option",{value:"Transporte"},"Transporte"),r.a.createElement("option",{value:"Sa\xfade"},"Sa\xfade"))),r.a.createElement("button",{className:"btn btn-success",onClick:this.handleExpenses,type:"button",disabled:n},"Adicionar despesa"))}}]),a}(n.Component)),F=Object(s.b)((function(e){return{currencies:e.wallet.currencies}}),(function(e){return{dispatchSpent:function(t){return e(I(t))}}}))(A),M=(a(48),function(e){Object(p.a)(a,e);var t=Object(b.a)(a);function a(e){var n;Object(d.a)(this,a);var r=(n=t.call(this,e)).props.selectedItem;return n.state={expenses:{id:r.id,value:r.value,description:r.description,currency:r.currency,method:r.method,tag:r.tag,exchangeRates:r.exchangeRates},addButton:!0},n.handleChange=n.handleChange.bind(Object(m.a)(n)),n.handleEdit=n.handleEdit.bind(Object(m.a)(n)),n.checkInputs=n.checkInputs.bind(Object(m.a)(n)),n}return Object(h.a)(a,[{key:"handleEdit",value:function(){var e=this.props,t=e.dispatchEdit,a=e.selectedItem,n=this.state.expenses;t(a.id,n)}},{key:"handleChange",value:function(e){var t=e.target,a=this.state.expenses,n=t.id,r=t.value;this.setState({expenses:Object(j.a)(Object(j.a)({},a),{},Object(u.a)({},n,r))}),this.checkInputs()}},{key:"checkInputs",value:function(){var e=this.state.expenses,t=e.value,a=e.description;return t&&a?this.setState({addButton:!1}):this.setState({addButton:!0})}},{key:"render",value:function(){var e=this.props.currencies,t=this.state,a=t.expenses,n=t.addButton;return r.a.createElement("form",{className:"edit-form-container"},r.a.createElement(D,{value:a.value,labelText:"Valor:",id:"value",onChange:this.handleChange}),r.a.createElement(D,{value:a.description,labelText:"Descri\xe7\xe3o:",id:"description",onChange:this.handleChange}),r.a.createElement(_,{labelText:"Moeda:",id:"currency",ariaLabel:"moeda",onChange:this.handleChange,currencies:e,value:a.currency}),r.a.createElement("label",{htmlFor:"method",className:"form-label"},"M\xe9todo de pagamento:",r.a.createElement("select",{className:"form-control",onChange:this.handleChange,"aria-label":"m\xe9todo de pagamento",id:"method",value:a.method},r.a.createElement("option",{value:"Dinheiro"},"Dinheiro"),r.a.createElement("option",{value:"Cart\xe3o de cr\xe9dito"},"Cart\xe3o de cr\xe9dito"),r.a.createElement("option",{value:"Cart\xe3o de d\xe9bito"},"Cart\xe3o de d\xe9bito"))),r.a.createElement("label",{htmlFor:"tag",className:"form-label"},"Tag:",r.a.createElement("select",{className:"form-select",value:a.tag,onChange:this.handleChange,name:"tag",id:"tag"},r.a.createElement("option",{value:"Alimenta\xe7\xe3o"},"Alimenta\xe7\xe3o"),r.a.createElement("option",{value:"Lazer"},"Lazer"),r.a.createElement("option",{value:"Trabalho"},"Trabalho"),r.a.createElement("option",{value:"Transporte"},"Transporte"),r.a.createElement("option",{value:"Sa\xfade"},"Sa\xfade"))),r.a.createElement("button",{className:"btn btn-warning",onClick:this.handleEdit,type:"button",disabled:n},"Editar despesa"))}}]),a}(n.Component)),P=Object(s.b)((function(e){var t=e.wallet;return{currencies:t.currencies,selectedItem:t.selectedItem}}),(function(e){return{dispatchEdit:function(){return e(S.apply(void 0,arguments))}}}))(M),R=(a(49),function(e){Object(p.a)(a,e);var t=Object(b.a)(a);function a(e){var n;return Object(d.a)(this,a),(n=t.call(this,e)).renderHeader=n.renderHeader.bind(Object(m.a)(n)),n.getCoinsOptions=n.getCoinsOptions.bind(Object(m.a)(n)),n.handleChange=n.handleChange.bind(Object(m.a)(n)),n.handleExpenses=n.handleExpenses.bind(Object(m.a)(n)),n.totalExpenses=n.totalExpenses.bind(Object(m.a)(n)),n}return Object(h.a)(a,[{key:"componentDidMount",value:function(){this.getCoinsOptions()}},{key:"componentDidUpdate",value:function(){this.totalExpenses()}},{key:"getCoinsOptions",value:function(){(0,this.props.fetchCoins)()}},{key:"handleExpenses",value:function(){(0,this.props.dispatchSpent)(this.state.expenses),this.setState({expenses:{value:"",description:"",currency:"USD",method:"dinheiro",tag:"Alimenta\xe7\xe3o"}})}},{key:"handleChange",value:function(e){var t=e.target,a=this.state.expenses,n=t.id,r=t.value;this.setState({expenses:Object(j.a)(Object(j.a)({},a),{},Object(u.a)({},n,r))}),this.checkInputs()}},{key:"totalExpenses",value:function(){return this.props.expenses.reduce((function(e,t){var a=t.exchangeRates[t.currency].ask;return e+=t.value*a}),0).toFixed(2)}},{key:"renderHeader",value:function(){var e=this.props.email;return r.a.createElement("header",{className:"header-container"},r.a.createElement("img",{src:v.a,alt:"bitcoin gif"}),r.a.createElement("span",{"data-testid":"email-field"},e),r.a.createElement("div",null,r.a.createElement("span",{"data-testid":"total-field"},"Despesa Total: ".concat(this.totalExpenses())),r.a.createElement("span",{"data-testid":"header-currency-field"},"BRL")))}},{key:"render",value:function(){var e=this.props.editItem;return r.a.createElement(r.a.Fragment,null,this.renderHeader(),e?r.a.createElement(P,null):r.a.createElement(F,null),r.a.createElement(L,null))}}]),a}(r.a.Component)),B=Object(s.b)((function(e){var t=e.user,a=e.wallet;return{email:t.email,currencies:a.currencies,expenses:a.expenses,editItem:a.editItem}}),(function(e){return{fetchCoins:function(){return e(function(){var e=Object(O.a)(g.a.mark((function e(t){var a;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t(x),e.prev=1,e.next=4,k();case 4:a=e.sent,t({type:"COINS_SUCCESS",coins:Object.keys(a)}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),t(C(e.t0));case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}())},dispatchSpent:function(t){return e(I(t))}}}))(R);a(50);var U=function(){return r.a.createElement(o.c,null,r.a.createElement(o.a,{exact:!0,path:"/",component:N}),r.a.createElement(o.a,{path:"/carteira",component:B}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var H=a(15),z=a(31),V=a(32),G={email:""},W=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:G,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_USER_EMAIL":return Object(j.a)(Object(j.a)({},e),{},{email:t.email});default:return e}},$=a(33),J={currencies:[],expenses:[],editItem:!1},q=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:J,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"COINS_LOADING":return Object(j.a)(Object(j.a)({},e),{},{isLoading:!0});case"COINS_SUCCESS":return Object(j.a)(Object(j.a)({},e),{},{isLoading:!1,currencies:t.coins});case"COINS_FAIL":return Object(j.a)(Object(j.a)({},e),{},{isLoading:!1,error:t.error});case"SPENT_SUCCESS":return Object(j.a)(Object(j.a)({},e),{},{expenses:[].concat(Object($.a)(e.expenses),[Object(j.a)(Object(j.a)({},t.spent),{},{id:e.expenses.length})]),isLoading:!1});case"DELETE_ITEM":return Object(j.a)(Object(j.a)({},e),{},{expenses:e.expenses.filter((function(e){return e.id!==t.itemId}))});case"EDIT_ITEM":return Object(j.a)(Object(j.a)({},e),{},{selectedItem:e.expenses.find((function(e){return e.id===t.selectedItem})),editItem:t.editItem});case"REPLACE_ITEM":return Object(j.a)(Object(j.a)({},e),{},{expenses:e.expenses.map((function(e){return e.id===t.itemId?t.updatedItem:e})),editItem:!1});default:return e}},K=Object(H.combineReducers)({user:W,wallet:q}),Q=Object(H.createStore)(K,Object(z.composeWithDevTools)(Object(H.applyMiddleware)(V.a)));i.a.render(r.a.createElement(l.a,{basename:"/virtual-wallet"},r.a.createElement(s.a,{store:Q},r.a.createElement(U,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[34,1,2]]]);
//# sourceMappingURL=main.f924acc2.chunk.js.map